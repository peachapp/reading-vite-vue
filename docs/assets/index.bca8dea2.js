import{t as a,v as e,F as s,p as t,G as l,r as n,o,x as i,s as c,q as v,J as r,Q as u,w as d,M as k,O as p,c as m,X as h,U as f,V as w}from"./vendor.8d857a94.js";import{_ as g}from"./coverImage.8ee5166a.js";import{a as _,b}from"./index.eb128dc6.js";a("data-v-a80f602e");const y={class:"page-container"},C={class:"page-header"},z={class:"swipe-item"},I={class:"cat-container overflowauto"},j=["onClick"],x={class:"cat-title"},q={class:"rank-container overflowauto"},T=["onClick"],U={class:"rank-content"},F={class:"rank-title"},G={class:"rank-author"},J={class:"rank-desc"};e();const M={setup(a){const e=s(),M=t({0:{en:"male",zh:"男生"},1:{en:"female",zh:"女生"},2:{en:"picture",zh:"标签"},3:{en:"epub",zh:"epub"}});let O=t(0),Q=t({});const V=t();let X=t([0,0,0,0]),A=t([{},{},{},{}]);const B=l((()=>Q.value[M.value[O.value].en][X.value[O.value]]._id)),D=async(a,e)=>{try{const s=await b({rankId:e});s.ok&&(A.value[a]=s.ranking||{})}catch(s){console.log(s)}},E=a=>{V.value.swipeTo(a)},H=a=>{O.value=a};return(async()=>{try{const a=await _();if(a.ok){Q.value=a||{};for(let a=0;a<4;a++){const e=((Q.value[M.value[a].en]||[])[0]||{})._id;await D(a,e)}}}catch(a){console.log(a)}})(),(a,s)=>{const t=n("van-tab"),l=n("van-tabs"),_=n("van-tag"),b=n("van-swipe-item"),K=n("van-swipe");return o(),i("div",y,[c("div",C,[v(l,{active:r(O),"onUpdate:active":s[0]||(s[0]=a=>u(O)?O.value=a:O=a),onChange:E},{default:d((()=>[(o(!0),i(k,null,p(M.value,((a,e)=>(o(),m(t,{key:e,name:1*e,title:a.zh},null,8,["name","title"])))),128))])),_:1},8,["active"])]),v(K,{class:"swipe","show-indicators":!1,ref:V,onChange:H},{default:d((()=>[(o(!0),i(k,null,p(M.value,((a,s)=>(o(),m(b,{key:s},{default:d((()=>[c("div",z,[c("div",I,[(o(!0),i(k,null,p(r(Q)[a.en],((a,e)=>(o(),i("div",{key:e,class:h(["cat-item",{"cat-item-active":r(X)[s]===e}]),onClick:a=>((a,e)=>{X.value[a]=e,D(O.value,B.value)})(s,e)},[c("div",x,f(a.shortTitle),1)],10,j)))),128))]),c("div",q,[(o(!0),i(k,null,p(r(A)[s].books,((a,s)=>(o(),i("div",{class:"rank-item",key:s,onClick:s=>{return t=a._id,void e.push({name:"bookdetail",query:{bookId:t}});var t}},[v(g,{class:"rank-image",path:a.cover},null,8,["path"]),c("div",U,[c("div",F,f(a.title),1),c("div",G,f(a.author),1),c("div",J,f(a.shortIntro),1),c("div",null,[v(_,{plain:""},{default:d((()=>[w(f(a.minorCate),1)])),_:2},1024)])])],8,T)))),128))])])])),_:2},1024)))),128))])),_:1},512)])}},__scopeId:"data-v-a80f602e"};export{M as default};

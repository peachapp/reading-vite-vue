import{t as a,v as e,u as s,F as o,G as l,p as n,H as t,r as c,o as i,x as d,q as u,s as r,J as v,M as h,O as p,w as k,Q as f,U as m,V as b}from"./vendor.8d857a94.js";import{l as w}from"./lodash.97ff05ac.js";import{_ as y}from"./coverImage.8ee5166a.js";a("data-v-168a81af");const g={class:"page-container"},I={class:"page-content"},_={class:"bookshelf-container"},x={key:0,class:"bookshelf-notempty"},C=["onClick","onDblclick"],j={class:"bookshelf-title"},q={key:1,class:"bookshelf-empty"},D=r("div",{class:"bookshelf-tips"},[r("div",null,"一日无书"),r("div",null,"百事荒芜")],-1),T=b(" 去找书 ");e();const B={setup(a){const e=s(),b=o(),B=l((()=>e.state.bookshelfList));let L=n(null);const S=l((()=>B.value.findIndex((a=>a._id===L.value))));let U=n(!1);const A=[{id:1,name:"书籍详情"},{id:2,name:"删除"}];let F=null;const G=()=>{b.push({name:"search"})},H=()=>{b.push({name:"bookcity"})},J=a=>{var e;1===a.id&&(e=L.value,b.push({name:"bookdetail",query:{bookId:e}})),2===a.id&&B.value.splice(S.value,1)};t(B.value,(a=>{const s=w.exports.cloneDeep(a);e.dispatch("onSetBookshelfList",s)}));const M=()=>{L.value=null,U.value=!1};return(a,e)=>{const s=c("van-nav-bar"),o=c("van-search"),l=c("van-button"),n=c("van-action-sheet");return i(),d("div",g,[u(s,{class:"page-title",fixed:"",title:"书架"}),r("div",I,[u(o,{class:"page-search",shape:"round",readonly:"",placeholder:"请输入搜索关键词",onClick:G}),r("div",_,[v(B)&&v(B).length>0?(i(),d("div",x,[(i(!0),d(h,null,p(v(B),((a,e)=>(i(),d("div",{class:"bookshelf-item",key:e,onClick:e=>{return s=a._id,o=a.sourceId,F&&(window.clearTimeout(F),F=null),void(F=window.setTimeout((()=>{b.push({name:"reading",query:{bookId:s,sourceId:o}})}),300));var s,o},onDblclick:e=>{return s=a._id,F&&(window.clearTimeout(F),F=null),L.value=s,void(U.value=!0);var s}},[u(y,{class:"bookshelf-image",path:a.cover},null,8,["path"]),r("div",j,m(a.title),1)],40,C)))),128))])):(i(),d("div",q,[D,u(l,{class:"find-btn",block:"",color:"#12AB76",onClick:H},{default:k((()=>[T])),_:1})]))])]),u(n,{show:v(U),"onUpdate:show":e[0]||(e[0]=a=>f(U)?U.value=a:U=a),actions:A,"cancel-text":"取消","close-on-click-action":"",onSelect:J,onCancel:M},null,8,["show"])])}},__scopeId:"data-v-168a81af"};export{B as default};

import{t as a,v as e,u as l,F as s,p as t,G as o,H as n,r as c,o as r,x as i,q as u,w as d,s as v,M as p,O as h,Z as k,J as f,c as y,V as g,U as m}from"./vendor.8d857a94.js";import{l as w}from"./lodash.97ff05ac.js";import{_ as x}from"./coverImage.8ee5166a.js";import{c as _,f as b}from"./index.eb128dc6.js";a("data-v-5f8bbaf9");const C={class:"page-container"},j={class:"page-content overflowauto"},I={key:0,class:"hotwords-container"},V=v("div",{class:"list-title"},[v("span",null," 搜索热词 "),v("span",null," 查看更多 ")],-1),q={key:1,class:"keywords-container"},S=v("span",null," 搜索历史 ",-1),W={class:"list-container"},D=v("div",{class:"list-title"},"搜索结果",-1),H=g(" 加载中... "),U={key:1},z=["onClick"],E={class:"res-content"},F={class:"res-title"},G={class:"res-author"},J={class:"res-desc"};e();const K={setup(a){const e=l(),K=s(),L=t([]),M=t(""),N=t(!1),O=t([]),R=o((()=>e.state.keyWords)),Z=()=>{K.go(-1)},A=async()=>{try{N.value=!0;const a=await b({query:M.value});N.value=!1,M.value&&(R.value.includes(M.value)||R.value.push(M.value)),a.ok&&(O.value=a.books||[])}catch(a){console.log(a)}},B=a=>{M.value=a,A()},P=()=>{R.value.splice(0,R.value.length)};n(R.value,(a=>{const l=w.exports.cloneDeep(a);e.dispatch("onSetKeyWords",l)}));return(async()=>{try{const a=await _();a.ok&&(L.value=a.searchHotWords||[])}catch(a){console.log(a)}})(),(a,e)=>{const l=c("van-search"),s=c("van-nav-bar"),t=c("van-tag"),o=c("van-loading"),n=c("van-empty");return r(),i("div",C,[u(s,{class:"page-title",fixed:"","left-arrow":"","right-text":"搜索",onClickLeft:Z,onClickRight:A},{title:d((()=>[u(l,{class:"page-search",shape:"round",modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=a=>M.value=a),placeholder:"请输入搜索关键词",onSearch:A},null,8,["modelValue"])])),_:1}),v("div",j,[L.value&&L.value.length>0?(r(),i("div",I,[V,(r(),i(p,null,h(10,((a,e)=>u(t,{class:"hotwords-item",round:"",color:"#e7e8ea","text-color":"#333",key:e,onClick:a=>B(L.value[e].word)},{default:d((()=>[g(m(L.value[e].word),1)])),_:2},1032,["onClick"]))),64))])):k("",!0),f(R)&&f(R).length>0?(r(),i("div",q,[v("div",{class:"list-title"},[S,v("span",{onClick:P}," 清空 ")]),(r(!0),i(p,null,h(f(R),((a,e)=>(r(),y(t,{class:"keywords-item",round:"",color:"#e7e8ea","text-color":"#333",key:e,onClick:e=>B(a)},{default:d((()=>[g(m(a),1)])),_:2},1032,["onClick"])))),128))])):k("",!0),v("div",W,[D,N.value?(r(),y(o,{key:0,size:"24px",vertical:""},{default:d((()=>[H])),_:1})):O.value&&O.value.length>0?(r(),i("div",U,[(r(!0),i(p,null,h(O.value,((a,e)=>(r(),i("div",{key:e,class:"res-item",onClick:e=>{return l=a._id,void K.push({name:"bookdetail",query:{bookId:l}});var l}},[u(x,{class:"res-image",path:a.cover},null,8,["path"]),v("div",E,[v("div",F,m(a.title),1),v("div",G,m(a.author),1),v("div",J,m(a.shortIntro),1),v("div",null,[u(t,{plain:"",style:{"margin-right":"6px"}},{default:d((()=>[g(m("END"===a.chapterStatus?"已完结":"连载"),1)])),_:2},1024),u(t,{plain:""},{default:d((()=>[g(m(a.cat),1)])),_:2},1024)])])],8,z)))),128))])):(r(),y(n,{key:2,description:"暂无数据"}))])])])}},__scopeId:"data-v-5f8bbaf9"};export{K as default};
